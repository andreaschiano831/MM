<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no"/>
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="Cucina Pro"/>
<meta name="theme-color" content="#0A1628"/>
<title>Cucina Pro</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow:hidden;font-family:'Plus Jakarta Sans',system-ui,-apple-system,sans-serif;background:#0A1628;-webkit-tap-highlight-color:transparent;}

/* ‚îÄ‚îÄ SWITCHER BAR ‚îÄ‚îÄ */
#switcher{
  position:fixed;top:0;left:0;right:0;z-index:100;
  height:52px;
  padding:0 16px;
  display:flex;align-items:center;gap:8px;
  background:#0A1628;
  border-bottom:1px solid rgba(255,255,255,.08);
  padding-top:env(safe-area-inset-top,0px);
}
#switcher .app-logo{
  display:flex;align-items:center;gap:8px;
  font-size:13px;font-weight:800;color:rgba(255,255,255,.6);
  letter-spacing:.3px;text-transform:uppercase;
  flex-shrink:0;
}
#switcher .app-logo span{font-size:11px;}
#switcher .divider{flex:1;}
.sw-btn{
  height:36px;padding:0 14px;
  border-radius:10px;border:1.5px solid;
  font-size:12px;font-weight:800;letter-spacing:.2px;
  display:flex;align-items:center;gap:6px;
  cursor:pointer;touch-action:manipulation;
  transition:all .18s;
  -webkit-tap-highlight-color:transparent;
}
.sw-btn.mep{
  background:rgba(10,22,40,.6);border-color:rgba(255,255,255,.15);
  color:rgba(255,255,255,.6);
}
.sw-btn.mep.active{
  background:#fff;border-color:#fff;color:#0A1628;
}
.sw-btn.frigo{
  background:rgba(220,38,38,.12);border-color:rgba(220,38,38,.3);
  color:rgba(220,80,80,.8);
}
.sw-btn.frigo.active{
  background:linear-gradient(135deg,#B91C1C,#EF4444);
  border-color:transparent;color:#fff;
}
.sw-btn:active{transform:scale(.95);}

/* ‚îÄ‚îÄ IFRAME CONTAINER ‚îÄ‚îÄ */
#frames{
  position:fixed;
  top:calc(52px + env(safe-area-inset-top,0px));
  left:0;right:0;
  bottom:0;
  overflow:hidden;
}
.frame-wrap{
  position:absolute;inset:0;
  transition:transform .35s cubic-bezier(.4,0,.2,1), opacity .3s ease;
  will-change:transform,opacity;
}
.frame-wrap.hidden{
  transform:translateX(100%);
  opacity:0;
  pointer-events:none;
}
.frame-wrap iframe{
  width:100%;height:100%;
  border:none;background:#fff;
}

/* ‚îÄ‚îÄ SPLASH ‚îÄ‚îÄ */
#splash{
  position:fixed;inset:0;z-index:999;
  background:#0A1628;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  gap:20px;
  transition:opacity .4s ease;
}
#splash.fade{opacity:0;pointer-events:none;}
.splash-ico{
  width:80px;height:80px;border-radius:22px;
  display:flex;align-items:center;justify-content:center;
  font-size:38px;
  background:rgba(255,255,255,.05);
  border:1.5px solid rgba(255,255,255,.1);
  animation:pulse 2s ease infinite;
}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(255,255,255,.1)}50%{box-shadow:0 0 0 12px rgba(255,255,255,0)}}
.splash-title{font-size:24px;font-weight:900;color:#fff;letter-spacing:-.3px;}
.splash-sub{font-size:12px;color:rgba(255,255,255,.35);font-weight:600;letter-spacing:.5px;text-transform:uppercase;}
.splash-loader{
  width:40px;height:3px;background:rgba(255,255,255,.1);border-radius:99px;overflow:hidden;
}
.splash-loader-bar{
  height:100%;width:0;background:#fff;border-radius:99px;
  animation:load 1.5s ease forwards;
}
@keyframes load{0%{width:0}60%{width:80%}100%{width:100%}}

/* ‚îÄ‚îÄ TOAST APP SWITCH ‚îÄ‚îÄ */
#app-toast{
  position:fixed;bottom:calc(env(safe-area-inset-bottom,0px) + 80px);
  left:50%;transform:translateX(-50%) translateY(20px);
  background:#0A1628;color:#fff;
  border:1px solid rgba(255,255,255,.15);
  border-radius:20px;padding:8px 18px;
  font-size:12px;font-weight:700;letter-spacing:.2px;
  z-index:200;opacity:0;
  transition:all .25s cubic-bezier(.34,1.56,.64,1);
  pointer-events:none;white-space:nowrap;
}
#app-toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div class="splash-ico">üç≥</div>
  <div class="splash-title">Cucina Pro</div>
  <div class="splash-sub">Caricamento‚Ä¶</div>
  <div class="splash-loader"><div class="splash-loader-bar"></div></div>
</div>

<!-- SWITCHER BAR -->
<div id="switcher">
  <div class="app-logo"><span>üç≥</span> Cucina Pro</div>
  <div class="divider"></div>
  <button class="sw-btn mep active" id="sw-mep" onclick="switchTo('mep')">‚óÜ Mise en Place</button>
  <button class="sw-btn frigo" id="sw-frigo" onclick="switchTo('frigo')">‚ùÑ Congelatore</button>
</div>

<!-- FRAMES -->
<div id="frames">
  <div class="frame-wrap" id="wrap-mep">
    <iframe id="frame-mep" src="mise-en-place-pro.html" title="Mise en Place Pro" loading="eager"></iframe>
  </div>
  <div class="frame-wrap hidden" id="wrap-frigo">
    <iframe id="frame-frigo" src="congelatore.html" title="Congelatore Pro" loading="lazy"></iframe>
  </div>
</div>

<!-- TOAST -->
<div id="app-toast"></div>

<script>
var current="mep";
var loaded={mep:false,frigo:false};

// Esposto ai frame figli per permettere il switch
window._switchApp=function(app){switchTo(app);};

function switchTo(app){
  if(app===current)return;
  var prev=current;current=app;
  // Aggiorna bar
  document.getElementById("sw-mep").className="sw-btn mep"+(app==="mep"?" active":"");
  document.getElementById("sw-frigo").className="sw-btn frigo"+(app==="frigo"?" active":"");
  // Anima frame
  var fromWrap=document.getElementById("wrap-"+prev);
  var toWrap=document.getElementById("wrap-"+app);
  // Slide: mep a sinistra, frigo a destra
  fromWrap.style.transition="transform .3s cubic-bezier(.4,0,.2,1),opacity .25s";
  toWrap.style.transition="transform .35s cubic-bezier(.4,0,.2,1),opacity .3s";
  // Calcola direzione
  var goRight=(app==="frigo");
  fromWrap.style.transform=goRight?"translateX(-30%)":"translateX(100%)";
  fromWrap.style.opacity="0";
  fromWrap.style.pointerEvents="none";
  toWrap.style.transform=goRight?"translateX(100%)":"translateX(-30%)";
  toWrap.style.opacity="0";
  toWrap.classList.remove("hidden");
  requestAnimationFrame(function(){
    toWrap.style.transform="translateX(0)";
    toWrap.style.opacity="1";
    toWrap.style.pointerEvents="";
  });
  // Reset from dopo animazione
  setTimeout(function(){
    fromWrap.className="frame-wrap hidden";
    fromWrap.style.cssText="";
  },350);
  // Toast
  showToast(app==="frigo"?"‚ùÑ Congelatore":"‚óÜ Mise en Place");
}

function showToast(msg){
  var t=document.getElementById("app-toast");
  t.textContent=msg;t.classList.add("show");
  setTimeout(function(){t.classList.remove("show");},1600);
}

// Rimuovi splash quando entrambi i frame sono pronti
function onFrameLoad(id){
  loaded[id]=true;
  if(loaded.mep){
    setTimeout(function(){
      var sp=document.getElementById("splash");
      sp.classList.add("fade");
      setTimeout(function(){sp.style.display="none";},450);
    },300);
  }
}
document.getElementById("frame-mep").addEventListener("load",function(){onFrameLoad("mep");});
document.getElementById("frame-frigo").addEventListener("load",function(){onFrameLoad("frigo");});

// Forza caricamento frigo dopo 1s per pre-warmup
setTimeout(function(){
  var f=document.getElementById("frame-frigo");
  if(!f.src)f.src="congelatore.html";
},1000);

// Prevenire overscroll dell'app-shell
document.body.addEventListener("touchmove",function(e){
  if(e.target===document.body)e.preventDefault();
},{passive:false});
</script>
</body>
</html>
